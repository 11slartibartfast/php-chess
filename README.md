## PGN Chess for PHP

![PGN Chess](/resources/chess-move.jpg?raw=true)

This is a simple, friendly, and powerful PGN (Portable Game Notation) library for running chess games from within PHP applications. It understands the rules of chess, and is capable of validating and playing PGN notated games.

PGN Chess comes to the rescue in the following scenarios:

- Develop APIs on the server side for validating chess games
- Create funny, random games for fun
- Analyze games of chess
- Validate games
- Build chess-related web apps
- Play chess moves

### 1. Install

Via composer:

    $ composer require programarivm/pgn-chess

### 2. Usage

Just instantiate a game and play PGN moves converted into PHP objects:

```php
<?php
use PGNChess\Game;
use PGNChess\PGN\Converter;
use PGNChess\PGN\Symbol;

$game = new Game;

$game->play(Converter::toObject(Symbol::WHITE, 'e4');
```

The call to the `$board->play` method returns `true` or `false` depending on whether or not a chess move can be run on the board. It is up to you to process the result accordingly.

In order to know whether or not a move checks the opponent's king:

```php
$game->isChecked(Symbol::WHITE);
```

And to know if a player is checkmated:

```php
$game->isMated(Symbol::WHITE);
```

### 3. Examples

This is the output obtained when running `game01.php`:

    $ php examples/game01.php
    w played d4
    b played d6
    w played c4
    b played g6
    w played Nc3
    b played Bg7
    w played e4
    b played e6
    w played Nf3
    b played Ne7
    w played Bd3
    b played O-O
    w played Qc2
    b played Nd7
    w played O-O-O
    Illegal move

In this particular example we're printing the output and exiting the game if an illegal chess move is found. But obviously you can take a different approach, for example go into a loop till the player runs a valid move.

Again, it is up to you how to process the moves accordingly -- ask the player to please try again, play a sound, exit the game or whatever thing you consider appropriate. The important thing is that PGN Chess understands chess rules, internally replicating the game being played on the board.

Let's look at another example, the output generated by `game03.php`:

    $ php examples/game03.php
    w played e4
    b played c5
    w played Nf3
    b played Nc6
    w played Bb5
    b played e6
    w played O-O
    b played a6
    w played Ba4
    b played Qc7
    w played c3
    b played b5
    w played Bb3
    b played Bb7
    w played d4
    b played c4
    w played Bc2
    b played Be7
    w played d5
    b played exd5
    w played exd5
    b played Ne5
    w played Nxe5
    b played Qxe5
    w played Re1
    b played Qxd5
    w played Qxd5
    b played Bxd5
    w played Bg5
    b played f6
    w played Bh4
    b played Kf7
    w played Na3
    b played Nh6
    w played Be4
    b played Bxe4
    w played Rxe4
    b played Bxa3
    w played bxa3
    b played Rhe8
    w played Rd4
    b played Re7
    w played Rad1
    b played Nf5
    w played Rxd7
    b played Nxh4
    w played R1d4
    b played Nf5
    w played R4d5
    b played g6
    w played g4
    b played Nh4
    w played f4
    b played Re8
    w played Kf2
    b played g5
    w played Kg3
    b played Ng6
    w played fxg5
    b played Ne5
    w played Rxe7+
    Check!
    b played Rxe7
    w played gxf6
    b played Kxf6
    w played g5+
    Check!
    b played Ke6
    w played Rd1
    b played Nd3
    w played Rd2
    b played Kf7
    w played h4
    b played Kg6
    w played Kg4
    b played Re4+
    Check!
    w played Kf3
    b played Rxh4
    w played Re2
    b played Rf4+
    Check!
    w played Kg3
    b played Rf5
    w played Re6+
    Check!
    b played Kxg5

> **Remember**: PGN Chess games are actually run in the computer's memory. So, if it turns out that for whatever reason a player forgets to append the + symbol to their check moves, PGN Chess will anyway understand that it is a check move, as it is shown below. The same thing goes for checkmate moves.

    w played e4
    b played c5
    w played Nf3
    b played Nc6
    w played Bb5
    b played e6
    w played O-O
    b played a6
    w played Ba4
    b played Qc7
    w played c3
    b played b5
    w played Bb3
    b played Bb7
    w played d4
    b played c4
    w played Bc2
    b played Be7
    w played d5
    b played exd5
    w played exd5
    b played Ne5
    w played Nxe5
    b played Qxe5
    w played Re1
    b played Qxd5
    w played Qxd5
    b played Bxd5
    w played Bg5
    b played f6
    w played Bh4
    b played Kf7
    w played Na3
    b played Nh6
    w played Be4
    b played Bxe4
    w played Rxe4
    b played Bxa3
    w played bxa3
    b played Rhe8
    w played Rd4
    b played Re7
    w played Rad1
    b played Nf5
    w played Rxd7
    b played Nxh4
    w played R1d4
    b played Nf5
    w played R4d5
    b played g6
    w played g4
    b played Nh4
    w played f4
    b played Re8
    w played Kf2
    b played g5
    w played Kg3
    b played Ng6
    w played fxg5
    b played Ne5
    w played Rxe7
    Check!
    b played Rxe7
    w played gxf6
    b played Kxf6
    w played g5
    Check!
    b played Ke6
    w played Rd1
    b played Nd3
    w played Rd2
    b played Kf7
    w played h4
    b played Kg6
    w played Kg4
    b played Re4
    Check!
    w played Kf3
    b played Rxh4
    w played Re2
    b played Rf4
    Check!
    w played Kg3
    b played Rf5
    w played Re6
    Check!
    b played Kxg5

### 4. PGN Format

Need some more examples? Look at the format used in the following moves, they all will be processed OK by PGN Chess.

    1. e4 e5 2. Nc3 Nf6 3. f4 exf4 4. d4 Bb4 5. e5 Bxc3+ 6. bxc3 Nd5 7. c4 Qh4+
    8. g3 fxg3 9. Nf3 Qe4+ 10. Qe2 Qxe2+ 11. Bxe2 gxh2 12. cxd5 d6 13. Rxh2 Bg4
    14. Ba3 dxe5 15. dxe5 Nd7 16. Rg2 Bxf3 17. Bxf3 Nxe5 18. Re2 f6 19. d6 O-O-O
    20. Bg2 cxd6 21. Rd1 Kc7 22. Red2 Rd7 23. Bxd6+ Kc8 24. Rd4 Rhd8 25. Bh3
    Nf3+ 26. Kf2 Nxd4 27. Bxd7+ Rxd7 28. Rxd4 Rxd6 29. Rxd6 Kc7 30. Rd3 b6 31.
    Ke3 g6 32. Rd5 h5 33. c4 g5 34. Kf3 h4 35. Kg4 Kc6 36. Kf5 b5 37. Kxf6 bxc4
    38. Rd1 g4 39. Kg5 g3 40. Kxh4 g2 41. Rg1 c3 42. Rxg2 a5 43. Rc2 Kb5 44.
    Rxc3 Kb4 45. Rg3 a4 46. Kg4 Kc4 47. Kf4 Kd4 48. Kf5 Kc4 49. Ke5 Kb4 50. Kd5
    Kb5 51. Kd4 Kb4 52. Ke4 Kc4 53. Ke5 Kb4 54. Kd5 Kb5 55. Rg4 a3 56. Rg3 Kb4
    57. Kd6 Ka4 58. Kc5 Ka5 59. Rxa3# {Black checkmated} 1-0

    1. e4 c5 2. Nc3 Nc6 3. Bb5 g6 4. Bxc6 bxc6 5. d3 Bg7 6. f4 e6 7. Nf3 Ne7 8.
    O-O O-O 9. Qe1 d5 10. Qh4 d4 11. Ne2 Qc7 12. g4 e5 13. f5 gxf5 14. gxf5 Qd6
    15. Bh6 Bxh6 16. Qg3+ Bg7 17. Nh4 Qh6 18. f6 Ng6 19. fxg7 Kxg7 20. Nf5+ Bxf5
    21. exf5 Qe3+ 22. Qxe3 dxe3 23. fxg6 fxg6 24. Rxf8 Rxf8 25. Rf1 Rb8 26. Rf3
    Rxb2 27. Rxe3 Rxc2 28. a4 Ra2 29. Rxe5 Rxa4 30. Rxc5 Ra3 31. Rxc6 Rxd3 32.
    Kf2 Rd7 33. Ra6 h5 34. Nf4 Rf7 35. Ke3 Re7+ 36. Kf3 Rf7 37. Ke4 Re7+ 38. Re6
    Rxe6+ 39. Nxe6+ Kf6 40. Nd4 g5 41. h3 a5 42. Nc6 a4 43. Nb4 a3 44. Na2 g4
    45. hxg4 Kg5 46. Ke3 hxg4 47. Kf2 Kf4 48. Kg2 g3 49. Nc3 Kg4 50. Na2 Kf4 51.
    Nc3 Kg4 52. Na2 Kf4 53. Nc1 Ke3 54. Kxg3 Kd2 55. Nb3+ Kc2 56. Kf3 a2 57. Ke3
    Kb2 58. Kd2 Kxb3 59. Kc1 Ka3 60. Kd2 Kb2 61. Kd3 a1=Q 62. Kc4 Ka3 63. Kc5
    Qb2 64. Kd6 Qc2 65. Ke6 Qd2 {White forfeits on time} 0-1

### 5. License

The MIT License (MIT).

### 6. Contributions

Would you help make this library better? Contributions are welcome! Feel free to send a pull request.
